<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Mat's Blog-O-Matic - eclipse</title>
        <link rel="stylesheet" href="//blog.matbooth.co.uk/theme/css/main.css" />
        <link href="//blog.matbooth.co.uk/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Mat's Blog-O-Matic Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="//blog.matbooth.co.uk/">Mat's Blog-O-Matic<strong>A Linux, coding and DIY blog.</strong></a></h1>
                <nav><ul>
                    <li><a href="/tag/fedora.html">Fedora</a></li>
                    <li><a href="/tag/eclipse.html">Eclipse</a></li>
                    <li><a href="/tag/diy.html">DIY</a></li>
                    <li><a href="//blog.matbooth.co.uk/pages/about-mat-booth.html">About Mat Booth</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="//blog.matbooth.co.uk/14-remote-osgi-console-with-equinox.html">Using the remote OSGi console with Equinox</a></h1>
<footer class="post-info">
        <abbr class="published" title="2020-04-23T15:00:00+01:00">
                Published: Thu 23 April 2020
        </abbr>
		<br />
        <abbr class="modified" title="2020-04-23T15:00:00+01:00">
                Updated: Thu 23 April 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="//blog.matbooth.co.uk/author/mat-booth.html">Mat Booth</a>
        </address>
<p>In <a href="//blog.matbooth.co.uk/category/misc.html">Misc</a>.</p>
<p>tags: <a href="//blog.matbooth.co.uk/tag/eclipse.html">eclipse</a> </p>
</footer><!-- /.post-info --><p>You may be familiar with the OSGi shell you get when you pass the <code>-console</code> option to Equinox on the command line. Did you know you can also use this console over Telnet sessions or SSH sessions? This article shows you the bare minimum needed to do so.</p>
<p>To recap, the minimal bundle set needed to start Equinox with the console is as follows:</p>
<div class="highlight"><pre><span></span><code><span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">felix</span><span class="p">.</span><span class="n">gogo</span><span class="p">.</span><span class="n">command_1</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="n">v20170914</span><span class="o">-</span><span class="mi">1324</span><span class="p">.</span><span class="n">jar</span>
<span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">felix</span><span class="p">.</span><span class="n">gogo</span><span class="p">.</span><span class="n">runtime_1</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="n">v20180713</span><span class="o">-</span><span class="mi">1646</span><span class="p">.</span><span class="n">jar</span>
<span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">felix</span><span class="p">.</span><span class="n">gogo</span><span class="p">.</span><span class="n">shell_1</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="n">v20180713</span><span class="o">-</span><span class="mi">1646</span><span class="p">.</span><span class="n">jar</span>
<span class="n">org</span><span class="p">.</span><span class="n">eclipse</span><span class="p">.</span><span class="n">equinox</span><span class="p">.</span><span class="n">console_1</span><span class="p">.</span><span class="mi">4</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="n">v20190819</span><span class="o">-</span><span class="mi">1430</span><span class="p">.</span><span class="n">jar</span>
<span class="n">org</span><span class="p">.</span><span class="n">eclipse</span><span class="p">.</span><span class="n">osgi_3</span><span class="p">.</span><span class="mi">15</span><span class="p">.</span><span class="mi">200</span><span class="p">.</span><span class="n">v20200214</span><span class="o">-</span><span class="mi">1600</span><span class="p">.</span><span class="n">jar</span>
</code></pre></div>


<p>All of these bundles are available in the <strong>Equinox SDK</strong> zip file available from the <a href="https://download.eclipse.org/equinox/">Equinox Downloads</a> site. As of writing the latest release is <a href="https://download.eclipse.org/equinox/drops/R-4.15-202003050155/download.php?dropFile=equinox-SDK-4.15.zip">Equinox SDK 4.15</a>.</p>
<p>Extract these bundles into a directory, then inside that directory create a <code>configuration/config.ini</code> file with the following content:</p>
<div class="highlight"><pre><span></span><code><span class="na">osgi.bundles</span><span class="o">=</span><span class="s">\</span>
<span class="s">    org.apache.felix.gogo.runtime,\</span>
<span class="s">    org.apache.felix.gogo.command,\</span>
<span class="s">    org.apache.felix.gogo.shell,\</span>
<span class="s">    org.eclipse.equinox.console</span>
</code></pre></div>


<p>Now you can start this minimal Equinox, with console, by passing the <code>-console</code> option, for example:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nv">java</span> <span class="o">-</span><span class="nv">jar</span> <span class="nv">org</span>.<span class="nv">eclipse</span>.<span class="nv">osgi_</span><span class="o">*</span>.<span class="nv">jar</span> <span class="o">-</span><span class="nv">console</span>
<span class="nv">osgi</span><span class="o">&gt;</span> <span class="nv">ss</span>
<span class="s2">&quot;</span><span class="s">Framework is launched.</span><span class="s2">&quot;</span>


<span class="nv">id</span>      <span class="nv">State</span>       <span class="nv">Bundle</span>
<span class="mi">0</span>       <span class="nv">ACTIVE</span>      <span class="nv">org</span>.<span class="nv">eclipse</span>.<span class="nv">osgi_3</span>.<span class="mi">15</span>.<span class="mi">200</span>.<span class="nv">v20200214</span><span class="o">-</span><span class="mi">1600</span>
<span class="mi">1</span>       <span class="nv">ACTIVE</span>      <span class="nv">org</span>.<span class="nv">apache</span>.<span class="nv">felix</span>.<span class="nv">gogo</span>.<span class="nv">runtime_1</span>.<span class="mi">1</span>.<span class="mi">0</span>.<span class="nv">v20180713</span><span class="o">-</span><span class="mi">1646</span>
<span class="mi">2</span>       <span class="nv">ACTIVE</span>      <span class="nv">org</span>.<span class="nv">apache</span>.<span class="nv">felix</span>.<span class="nv">gogo</span>.<span class="nv">command_1</span>.<span class="mi">0</span>.<span class="mi">2</span>.<span class="nv">v20170914</span><span class="o">-</span><span class="mi">1324</span>
<span class="mi">3</span>       <span class="nv">ACTIVE</span>      <span class="nv">org</span>.<span class="nv">apache</span>.<span class="nv">felix</span>.<span class="nv">gogo</span>.<span class="nv">shell_1</span>.<span class="mi">1</span>.<span class="mi">0</span>.<span class="nv">v20180713</span><span class="o">-</span><span class="mi">1646</span>
<span class="mi">4</span>       <span class="nv">ACTIVE</span>      <span class="nv">org</span>.<span class="nv">eclipse</span>.<span class="nv">equinox</span>.<span class="nv">console_1</span>.<span class="mi">4</span>.<span class="mi">0</span>.<span class="nv">v20190819</span><span class="o">-</span><span class="mi">1430</span>
<span class="nv">osgi</span><span class="o">&gt;</span> <span class="k">exit</span>
<span class="nv">Really</span> <span class="nv">want</span> <span class="nv">to</span> <span class="nv">stop</span> <span class="nv">Equinox</span>? <span class="ss">(</span><span class="nv">y</span><span class="o">/</span><span class="nv">n</span><span class="c1">; default=y)  </span>
</code></pre></div>


<h3>Over Telnet</h3>
<p>Starting the console in a Telnet session instead is very easy, you just need to pass a port number with the <code>-console</code> option, for example:</p>
<div class="highlight"><pre><span></span><code>$ java -jar org.eclipse.osgi_*.jar -console <span class="m">1234</span>
</code></pre></div>


<p>From another terminal, you can then connect to the Telnet session like this, using the port you specified above:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nv">telnet</span> <span class="nv">localhost</span> <span class="mi">1234</span>
<span class="nv">Trying</span> ::<span class="mi">1</span>...
<span class="nv">Connected</span> <span class="nv">to</span> <span class="nv">localhost</span>.
<span class="nv">Escape</span> <span class="nv">character</span> <span class="nv">is</span> <span class="s1">&#39;</span><span class="s">^]</span><span class="s1">&#39;</span>.
<span class="nv">osgi</span><span class="o">&gt;</span> <span class="nv">ss</span>
<span class="s2">&quot;</span><span class="s">Framework is launched.</span><span class="s2">&quot;</span>


<span class="nv">id</span>      <span class="nv">State</span>       <span class="nv">Bundle</span>
<span class="mi">0</span>       <span class="nv">ACTIVE</span>      <span class="nv">org</span>.<span class="nv">eclipse</span>.<span class="nv">osgi_3</span>.<span class="mi">15</span>.<span class="mi">200</span>.<span class="nv">v20200214</span><span class="o">-</span><span class="mi">1600</span>
<span class="mi">1</span>       <span class="nv">ACTIVE</span>      <span class="nv">org</span>.<span class="nv">apache</span>.<span class="nv">felix</span>.<span class="nv">gogo</span>.<span class="nv">runtime_1</span>.<span class="mi">1</span>.<span class="mi">0</span>.<span class="nv">v20180713</span><span class="o">-</span><span class="mi">1646</span>
<span class="mi">2</span>       <span class="nv">ACTIVE</span>      <span class="nv">org</span>.<span class="nv">apache</span>.<span class="nv">felix</span>.<span class="nv">gogo</span>.<span class="nv">command_1</span>.<span class="mi">0</span>.<span class="mi">2</span>.<span class="nv">v20170914</span><span class="o">-</span><span class="mi">1324</span>
<span class="mi">3</span>       <span class="nv">ACTIVE</span>      <span class="nv">org</span>.<span class="nv">apache</span>.<span class="nv">felix</span>.<span class="nv">gogo</span>.<span class="nv">shell_1</span>.<span class="mi">1</span>.<span class="mi">0</span>.<span class="nv">v20180713</span><span class="o">-</span><span class="mi">1646</span>
<span class="mi">4</span>       <span class="nv">ACTIVE</span>      <span class="nv">org</span>.<span class="nv">eclipse</span>.<span class="nv">equinox</span>.<span class="nv">console_1</span>.<span class="mi">4</span>.<span class="mi">0</span>.<span class="nv">v20190819</span><span class="o">-</span><span class="mi">1430</span>
<span class="nv">osgi</span><span class="o">&gt;</span> <span class="k">disconnect</span>
<span class="k">Disconnect</span> <span class="nv">from</span> <span class="nv">console</span>? <span class="ss">(</span><span class="nv">y</span><span class="o">/</span><span class="nv">n</span><span class="c1">; default=y) </span>
<span class="nv">Connection</span> <span class="nv">closed</span> <span class="nv">by</span> <span class="nv">foreign</span> <span class="nv">host</span>.
</code></pre></div>


<p>Notice the use of the <code>disconnect</code> command this time, which allows you to end the console session without causing Equinox to exit. You can of course still use <code>exit</code> if you wish to terminate Equinox remotely.</p>
<p>You may also set the port in the <code>configuration/config.ini</code> file with the addition of this line:</p>
<div class="highlight"><pre><span></span><code><span class="na">osgi.console</span><span class="o">=</span><span class="s">1234</span>
</code></pre></div>


<p>And that will start the console as a Telnet session automatically on port 1234 without needing to pass <code>-console</code> at all, but if you do pass <code>-console</code> it will override any setting you have in the <code>configuration/config.ini</code> file.</p>
<h3>Over SSH</h3>
<p>To start a console session in an SSH session, a few more bundles are needed:</p>
<div class="highlight"><pre><span></span><code><span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">felix</span><span class="p">.</span><span class="n">gogo</span><span class="p">.</span><span class="n">command_1</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="n">v20170914</span><span class="o">-</span><span class="mi">1324</span><span class="p">.</span><span class="n">jar</span>
<span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">felix</span><span class="p">.</span><span class="n">gogo</span><span class="p">.</span><span class="n">runtime_1</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="n">v20180713</span><span class="o">-</span><span class="mi">1646</span><span class="p">.</span><span class="n">jar</span>
<span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">felix</span><span class="p">.</span><span class="n">gogo</span><span class="p">.</span><span class="n">shell_1</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="n">v20180713</span><span class="o">-</span><span class="mi">1646</span><span class="p">.</span><span class="n">jar</span>
<span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">sshd</span><span class="p">.</span><span class="n">osgi_2</span><span class="p">.</span><span class="mi">4</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="n">v20200318</span><span class="o">-</span><span class="mi">1614</span><span class="p">.</span><span class="n">jar</span>
<span class="n">org</span><span class="p">.</span><span class="n">eclipse</span><span class="p">.</span><span class="n">equinox</span><span class="p">.</span><span class="n">console_1</span><span class="p">.</span><span class="mi">4</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="n">v20190819</span><span class="o">-</span><span class="mi">1430</span><span class="p">.</span><span class="n">jar</span>
<span class="n">org</span><span class="p">.</span><span class="n">eclipse</span><span class="p">.</span><span class="n">equinox</span><span class="p">.</span><span class="n">console</span><span class="p">.</span><span class="n">jaas</span><span class="p">.</span><span class="n">fragment_1</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">300</span><span class="p">.</span><span class="n">v20200111</span><span class="o">-</span><span class="mi">0718</span><span class="p">.</span><span class="n">jar</span>
<span class="n">org</span><span class="p">.</span><span class="n">eclipse</span><span class="p">.</span><span class="n">equinox</span><span class="p">.</span><span class="n">console</span><span class="p">.</span><span class="n">ssh</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="mi">600</span><span class="o">-</span><span class="n">SNAPSHOT</span><span class="p">.</span><span class="n">jar</span>
<span class="n">org</span><span class="p">.</span><span class="n">eclipse</span><span class="p">.</span><span class="n">osgi_3</span><span class="p">.</span><span class="mi">15</span><span class="p">.</span><span class="mi">200</span><span class="p">.</span><span class="n">v20200214</span><span class="o">-</span><span class="mi">1600</span><span class="p">.</span><span class="n">jar</span>
<span class="n">org</span><span class="p">.</span><span class="n">slf4j</span><span class="p">.</span><span class="n">api_1</span><span class="p">.</span><span class="mi">7</span><span class="p">.</span><span class="mi">2</span><span class="p">.</span><span class="n">v20121108</span><span class="o">-</span><span class="mi">1250</span><span class="p">.</span><span class="n">jar</span>
</code></pre></div>


<p>All of these bundles are available in the <strong>Equinox SDK</strong> zip file available from the <a href="https://download.eclipse.org/equinox/">Equinox Downloads</a> site. As of writing the latest release is <a href="https://download.eclipse.org/equinox/drops/R-4.15-202003050155/download.php?dropFile=equinox-SDK-4.15.zip">Equinox SDK 4.15</a>.</p>
<p>Extract these bundles into a directory, then inside that directory create a <code>configuration/config.ini</code> file with the following content:</p>
<div class="highlight"><pre><span></span><code><span class="na">osgi.bundles</span><span class="o">=</span><span class="s">\</span>
<span class="s">    org.apache.felix.gogo.runtime,\</span>
<span class="s">    org.apache.felix.gogo.command,\</span>
<span class="s">    org.apache.felix.gogo.shell,\</span>
<span class="s">    org.apache.sshd.osgi,\</span>
<span class="s">    org.eclipse.equinox.console,\</span>
<span class="s">    org.eclipse.equinox.console.jaas.fragment,\</span>
<span class="s">    org.eclipse.equinox.console.ssh@start,\</span>
<span class="s">    org.slf4j.api</span>
<span class="na">osgi.console.ssh</span><span class="o">=</span><span class="s">127.0.0.1:1234</span>
<span class="na">osgi.console.ssh.useDefaultSecureStorage</span><span class="o">=</span><span class="s">true</span>
</code></pre></div>


<p>Equinox uses <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jaas/JAASRefGuide.html">JAAS</a> to authenticate SSH sessions, the default provider of which must be configured by creating a JAAS configuration file, for example <code>configuration/console.authentication.config</code> with the following content:</p>
<div class="highlight"><pre><span></span><code><span class="n">equinox_console</span> <span class="err">{</span>
    <span class="n">org</span><span class="p">.</span><span class="n">eclipse</span><span class="p">.</span><span class="n">equinox</span><span class="p">.</span><span class="n">console</span><span class="p">.</span><span class="n">jaas</span><span class="p">.</span><span class="n">SecureStorageLoginModule</span> <span class="n">REQUIRED</span><span class="p">;</span>
<span class="err">}</span><span class="p">;</span>
</code></pre></div>


<p>Then when starting Equinox you need to tell it where the JAAS configuration is by setting the <code>java.security.auth.login.config</code> system property. The default JAAS implementation stores its credentials in a file you must specify with the <code>org.eclipse.equinox.console.jaas.file</code> system property:</p>
<div class="highlight"><pre><span></span><code>$ java -Dssh.server.keystore<span class="o">=</span>configuration/hostkey.ser <span class="se">\</span>
       -Dorg.eclipse.equinox.console.jaas.file<span class="o">=</span>configuration/store <span class="se">\</span>
       -Djava.security.auth.login.config<span class="o">=</span>configuration/console.authentication.config -jar org.eclipse.osgi_*.jar
</code></pre></div>


<p>The default JAAS provider creates one default user account with username/password credentials of equinox/equinox. After you log in with these credentials, you will be prompted to create a new account and the default account will be removed.</p>
<p>Once Equinox is started, from another terminal you can connect to the SSH session like this:</p>
<div class="highlight"><pre><span></span><code><span class="err">$</span> <span class="n">ssh</span> <span class="o">-</span><span class="n">p</span> <span class="mi">1234</span> <span class="n">equinox</span><span class="mf">@127.0.0.1</span>
<span class="n">The</span> <span class="n">authenticity</span> <span class="n">of</span> <span class="n">host</span> <span class="err">&#39;</span><span class="p">[</span><span class="mf">127.0.0.1</span><span class="p">]</span><span class="o">:</span><span class="mi">1234</span> <span class="p">([</span><span class="mf">127.0.0.1</span><span class="p">]</span><span class="o">:</span><span class="mi">1234</span><span class="p">)</span><span class="err">&#39;</span> <span class="n">can</span><span class="err">&#39;</span><span class="n">t</span> <span class="n">be</span> <span class="n">established</span><span class="p">.</span>
<span class="n">RSA</span> <span class="n">key</span> <span class="n">fingerprint</span> <span class="n">is</span> <span class="nl">SHA256</span><span class="p">:</span><span class="mi">7</span><span class="n">x3eOsDRM5lyL5vRsVREy8hIawIfqRiZ7CBnk6GkfRA</span><span class="p">.</span>
<span class="n">Are</span> <span class="n">you</span> <span class="n">sure</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="k">continue</span> <span class="n">connecting</span> <span class="p">(</span><span class="n">yes</span><span class="o">/</span><span class="n">no</span><span class="o">/</span><span class="p">[</span><span class="n">fingerprint</span><span class="p">])</span><span class="o">?</span> <span class="n">yes</span>
<span class="nl">Warning</span><span class="p">:</span> <span class="n">Permanently</span> <span class="n">added</span> <span class="err">&#39;</span><span class="p">[</span><span class="mf">127.0.0.1</span><span class="p">]</span><span class="o">:</span><span class="mi">1234</span><span class="err">&#39;</span> <span class="p">(</span><span class="n">RSA</span><span class="p">)</span> <span class="n">to</span> <span class="n">the</span> <span class="n">list</span> <span class="n">of</span> <span class="n">known</span> <span class="n">hosts</span><span class="p">.</span>
<span class="n">Password</span> <span class="n">authentication</span>
<span class="nl">Password</span><span class="p">:</span> 
<span class="n">Currently</span> <span class="n">the</span> <span class="k">default</span> <span class="n">user</span> <span class="n">is</span> <span class="n">the</span> <span class="n">only</span> <span class="n">one</span><span class="p">;</span> <span class="n">since</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">deleted</span> <span class="n">after</span> <span class="n">first</span> <span class="n">login</span><span class="p">,</span> <span class="n">create</span> <span class="n">a</span> <span class="n">new</span> <span class="nl">user</span><span class="p">:</span>
<span class="nl">username</span><span class="p">:</span> <span class="n">mbooth</span>
<span class="nl">password</span><span class="p">:</span> 
<span class="n">Confirm</span> <span class="nl">password</span><span class="p">:</span> 
<span class="nl">roles</span><span class="p">:</span> <span class="n">admin</span>
<span class="n">osgi</span><span class="o">&gt;</span> <span class="n">disconnect</span>
<span class="n">Disconnect</span> <span class="n">from</span> <span class="n">console</span><span class="o">?</span> <span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">n</span><span class="p">;</span> <span class="k">default</span><span class="o">=</span><span class="n">y</span><span class="p">)</span> 
<span class="n">Connection</span> <span class="n">to</span> <span class="mf">127.0.0.1</span> <span class="n">closed</span><span class="p">.</span>
</code></pre></div>


<p>On subsequent connections you will be required to supply the newly created credentials:</p>
<div class="highlight"><pre><span></span><code><span class="err">$</span> <span class="n">ssh</span> <span class="o">-</span><span class="n">p</span> <span class="mi">1234</span> <span class="n">mbooth</span><span class="mf">@127.0.0.1</span>
<span class="n">Password</span> <span class="n">authentication</span>
<span class="nl">Password</span><span class="p">:</span> 
<span class="n">osgi</span><span class="o">&gt;</span> <span class="n">disconnect</span>
<span class="n">Disconnect</span> <span class="n">from</span> <span class="n">console</span><span class="o">?</span> <span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">n</span><span class="p">;</span> <span class="k">default</span><span class="o">=</span><span class="n">y</span><span class="p">)</span> 
<span class="n">Connection</span> <span class="n">to</span> <span class="mf">127.0.0.1</span> <span class="n">closed</span><span class="p">.</span>
</code></pre></div>


<p>Once logged in there are various commands for managing user accounts, passwords and roles. Type <code>help</code> at the OSGi console prompt to find out about these commands. It is possible to implement custom JAAS providers that can use different credential stores, but that is out of the scope of this article.</p>
<h3>Public Key Authentication</h3>
<p>It's common to want to use public key authentication with SSH and you may configure Equinox to do that instead of using JAAS authentication. First create your SSH key-pair as normal and create a file that contains the list of authorised keys that Equinox should consult when you attempt to connect:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nv">ssh</span><span class="o">-</span><span class="nv">keygen</span> <span class="o">-</span><span class="nv">f</span> <span class="o">~/</span>.<span class="nv">ssh</span><span class="o">/</span><span class="nv">equinox</span>
<span class="nv">Generating</span> <span class="nv">public</span><span class="o">/</span><span class="nv">private</span> <span class="nv">rsa</span> <span class="nv">key</span> <span class="nv">pair</span>.
<span class="nv">Enter</span> <span class="nv">passphrase</span> <span class="ss">(</span><span class="nv">empty</span> <span class="k">for</span> <span class="nv">no</span> <span class="nv">passphrase</span><span class="ss">)</span>: 
<span class="nv">Enter</span> <span class="nv">same</span> <span class="nv">passphrase</span> <span class="nv">again</span>: 
<span class="nv">Your</span> <span class="nv">identification</span> <span class="nv">has</span> <span class="nv">been</span> <span class="nv">saved</span> <span class="nv">in</span> <span class="o">/</span><span class="nv">home</span><span class="o">/</span><span class="nv">mbooth</span><span class="o">/</span>.<span class="nv">ssh</span><span class="o">/</span><span class="nv">equinox</span>
<span class="nv">Your</span> <span class="nv">public</span> <span class="nv">key</span> <span class="nv">has</span> <span class="nv">been</span> <span class="nv">saved</span> <span class="nv">in</span> <span class="o">/</span><span class="nv">home</span><span class="o">/</span><span class="nv">mbooth</span><span class="o">/</span>.<span class="nv">ssh</span><span class="o">/</span><span class="nv">equinox</span>.<span class="nv">pub</span>
<span class="nv">The</span> <span class="nv">key</span> <span class="nv">fingerprint</span> <span class="nv">is</span>:
<span class="nv">SHA256</span>:<span class="mi">0</span><span class="nv">k7MSbLLzhhzI7Gw6oSYEx8Fv5UpNHMPTdOUDj8rplQ</span> <span class="nv">mbooth</span>@<span class="nv">thinkpad</span><span class="o">-</span><span class="nv">p50</span>
<span class="nv">The</span> <span class="nv">key</span><span class="s1">&#39;</span><span class="s">s randomart image is:</span>
<span class="o">+---</span>[<span class="nv">RSA</span> <span class="mi">3072</span>]<span class="o">----+</span>
<span class="o">|</span>  . <span class="o">+</span> <span class="nv">oooo</span>..     <span class="o">|</span>
<span class="o">|</span>   <span class="o">+</span> <span class="o">+</span> <span class="o">=</span><span class="nv">o</span>.<span class="nv">o</span>      <span class="o">|</span>
<span class="o">|</span>    <span class="o">+</span> <span class="o">=</span> <span class="nv">o</span><span class="o">+</span>       <span class="o">|</span>
<span class="o">|</span>   . <span class="o">+</span> <span class="nv">BE</span>.<span class="o">+</span>      <span class="o">|</span>
<span class="o">|</span>. <span class="nv">o</span> <span class="nv">o</span> <span class="nv">o</span>.<span class="nv">S</span>  <span class="nv">o</span>     <span class="o">|</span>
<span class="o">|</span><span class="nv">o</span><span class="o">+</span> <span class="o">+</span> <span class="o">+</span>.<span class="o">=</span><span class="nv">o</span> .      <span class="o">|</span>
<span class="o">|=</span>.<span class="nv">o</span> <span class="o">=</span>.<span class="o">=</span><span class="nv">o</span>..       <span class="o">|</span>
<span class="o">|</span>.<span class="nv">o</span>   <span class="nv">O</span>..         <span class="o">|</span>
<span class="o">|</span><span class="nv">o</span>.  . <span class="nv">o</span>          <span class="o">|</span>
<span class="o">+----</span>[<span class="nv">SHA256</span>]<span class="o">-----+</span>

$ <span class="nv">cat</span> <span class="o">~/</span>.<span class="nv">ssh</span><span class="o">/</span><span class="nv">equinox</span>.<span class="nv">pub</span> <span class="o">&gt;</span> <span class="nv">configuration</span><span class="o">/</span><span class="nv">equinox_authorized_keys</span>
</code></pre></div>


<p>Next you will need to remove the following line from your <code>configuration/config.ini</code> file:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Remove this line</span>
<span class="na">osgi.console.ssh.useDefaultSecureStorage</span><span class="o">=</span><span class="s">true</span>
</code></pre></div>


<p>Now when you start Equinox, instead of telling it about the JAAS configuration, you must tell it about the authorised keys file:</p>
<div class="highlight"><pre><span></span><code>$ java -Dssh.server.keystore<span class="o">=</span>configuration/hostkey.ser <span class="se">\</span>
       -Dssh.server.authorized_keys<span class="o">=</span>configuration/equinox_authorized_keys -jar org.eclipse.osgi_*.jar
</code></pre></div>


<p>And that allows you to use your SSH key instead of a username/password pair when connecting to the SSH console session:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nv">ssh</span> <span class="o">-</span><span class="nv">i</span> <span class="o">~/</span>.<span class="nv">ssh</span><span class="o">/</span><span class="nv">equinox</span> <span class="o">-</span><span class="nv">p</span> <span class="mi">1234</span> <span class="nv">localhost</span>
<span class="nv">The</span> <span class="nv">authenticity</span> <span class="nv">of</span> <span class="nv">host</span> <span class="s1">&#39;</span><span class="s">[localhost]:1234 ([127.0.0.1]:1234)</span><span class="s1">&#39;</span> <span class="nv">can</span><span class="s1">&#39;</span><span class="s">t be established.</span>
<span class="nv">RSA</span> <span class="nv">key</span> <span class="nv">fingerprint</span> <span class="nv">is</span> <span class="nv">SHA256</span>:<span class="nv">m2JKy2fRZA1aqvxHBBe</span><span class="o">+</span><span class="nv">Awsgk98ryI29fH03Rg7jeHw</span>.
<span class="nv">Are</span> <span class="nv">you</span> <span class="nv">sure</span> <span class="nv">you</span> <span class="nv">want</span> <span class="nv">to</span> <span class="k">continue</span> <span class="nv">connecting</span> <span class="ss">(</span><span class="nv">yes</span><span class="o">/</span><span class="nv">no</span><span class="o">/</span>[<span class="nv">fingerprint</span>]<span class="ss">)</span>? <span class="nv">yes</span>
<span class="nv">Warning</span>: <span class="nv">Permanently</span> <span class="nv">added</span> <span class="s1">&#39;</span><span class="s">[localhost]:1234</span><span class="s1">&#39;</span> <span class="ss">(</span><span class="nv">RSA</span><span class="ss">)</span> <span class="nv">to</span> <span class="nv">the</span> <span class="nv">list</span> <span class="nv">of</span> <span class="nv">known</span> <span class="nv">hosts</span>.
<span class="nv">osgi</span><span class="o">&gt;</span> <span class="k">disconnect</span>
<span class="k">Disconnect</span> <span class="nv">from</span> <span class="nv">console</span>? <span class="ss">(</span><span class="nv">y</span><span class="o">/</span><span class="nv">n</span><span class="c1">; default=y) </span>
<span class="nv">Connection</span> <span class="nv">to</span> <span class="nv">localhost</span> <span class="nv">closed</span>.
</code></pre></div>


<p>Pretty nifty, eh?</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="//blog.matbooth.co.uk/13-eclipse-handling-content-types.html" rel="bookmark"
                           title="Permalink to Eclipse and Handling Content Types on Linux">Eclipse and Handling Content Types on Linux</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-02-06T15:00:00+00:00">
                Published: Thu 06 February 2020
        </abbr>
		<br />
        <abbr class="modified" title="2020-02-06T15:00:00+00:00">
                Updated: Thu 06 February 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="//blog.matbooth.co.uk/author/mat-booth.html">Mat Booth</a>
        </address>
<p>In <a href="//blog.matbooth.co.uk/category/misc.html">Misc</a>.</p>
<p>tags: <a href="//blog.matbooth.co.uk/tag/fedora.html">fedora</a> <a href="//blog.matbooth.co.uk/tag/eclipse.html">eclipse</a> </p>
</footer><!-- /.post-info -->                <p>Getting deep desktop integration on Linux.</p>
                <a class="readmore" href="//blog.matbooth.co.uk/13-eclipse-handling-content-types.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="//blog.matbooth.co.uk/12-eclipse-now-in-flathub.html" rel="bookmark"
                           title="Permalink to Eclipse 2019-12 Now Available From Flathub">Eclipse 2019-12 Now Available From Flathub</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-01-20T16:00:00+00:00">
                Published: Mon 20 January 2020
        </abbr>
		<br />
        <abbr class="modified" title="2020-01-20T16:00:00+00:00">
                Updated: Mon 20 January 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="//blog.matbooth.co.uk/author/mat-booth.html">Mat Booth</a>
        </address>
<p>In <a href="//blog.matbooth.co.uk/category/misc.html">Misc</a>.</p>
<p>tags: <a href="//blog.matbooth.co.uk/tag/fedora.html">fedora</a> <a href="//blog.matbooth.co.uk/tag/eclipse.html">eclipse</a> </p>
</footer><!-- /.post-info -->                <p>How to get the latest release of Eclipse from Flathub.</p>
                <a class="readmore" href="//blog.matbooth.co.uk/12-eclipse-now-in-flathub.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="//blog.matbooth.co.uk/10-eclipse-module-f30-addendum.html" rel="bookmark"
                           title="Permalink to Eclipse Module on F30 Addendum">Eclipse Module on F30 Addendum</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-08-30T12:30:00+01:00">
                Published: Fri 30 August 2019
        </abbr>
		<br />
        <abbr class="modified" title="2019-08-30T12:30:00+01:00">
                Updated: Fri 30 August 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="//blog.matbooth.co.uk/author/mat-booth.html">Mat Booth</a>
        </address>
<p>In <a href="//blog.matbooth.co.uk/category/misc.html">Misc</a>.</p>
<p>tags: <a href="//blog.matbooth.co.uk/tag/fedora.html">fedora</a> <a href="//blog.matbooth.co.uk/tag/eclipse.html">eclipse</a> </p>
</footer><!-- /.post-info -->                <p>Additional information about installing the Eclipse IDE module on F30.</p>
                <a class="readmore" href="//blog.matbooth.co.uk/10-eclipse-module-f30-addendum.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="//blog.matbooth.co.uk/09-eclipse-module-f30.html" rel="bookmark"
                           title="Permalink to Eclipse is Now a Module on Fedora 30">Eclipse is Now a Module on Fedora 30</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-08-21T14:30:00+01:00">
                Published: Wed 21 August 2019
        </abbr>
		<br />
        <abbr class="modified" title="2019-08-21T14:30:00+01:00">
                Updated: Wed 21 August 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="//blog.matbooth.co.uk/author/mat-booth.html">Mat Booth</a>
        </address>
<p>In <a href="//blog.matbooth.co.uk/category/misc.html">Misc</a>.</p>
<p>tags: <a href="//blog.matbooth.co.uk/tag/fedora.html">fedora</a> <a href="//blog.matbooth.co.uk/tag/eclipse.html">eclipse</a> </p>
</footer><!-- /.post-info -->                <p>How to install the Eclipse IDE module on Fedora 30!</p>
                <a class="readmore" href="//blog.matbooth.co.uk/09-eclipse-module-f30.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="//blog.matbooth.co.uk/08-openjdk-in-flathub.html" rel="bookmark"
                           title="Permalink to The State of Java in Flathub">The State of Java in Flathub</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-07-22T16:00:00+01:00">
                Published: Mon 22 July 2019
        </abbr>
		<br />
        <abbr class="modified" title="2019-07-22T16:00:00+01:00">
                Updated: Mon 22 July 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="//blog.matbooth.co.uk/author/mat-booth.html">Mat Booth</a>
        </address>
<p>In <a href="//blog.matbooth.co.uk/category/misc.html">Misc</a>.</p>
<p>tags: <a href="//blog.matbooth.co.uk/tag/fedora.html">fedora</a> <a href="//blog.matbooth.co.uk/tag/eclipse.html">eclipse</a> </p>
</footer><!-- /.post-info -->                <p>What's the deal with Java in Flathub?</p>
                <a class="readmore" href="//blog.matbooth.co.uk/08-openjdk-in-flathub.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="//blog.matbooth.co.uk/06-benefits-of-distro-packaging.html" rel="bookmark"
                           title="Permalink to Benefits of Linux Distro Packaging">Benefits of Linux Distro Packaging</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-12-09T11:00:00+00:00">
                Published: Wed 09 December 2015
        </abbr>
		<br />
        <abbr class="modified" title="2015-12-09T11:00:00+00:00">
                Updated: Wed 09 December 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="//blog.matbooth.co.uk/author/mat-booth.html">Mat Booth</a>
        </address>
<p>In <a href="//blog.matbooth.co.uk/category/misc.html">Misc</a>.</p>
<p>tags: <a href="//blog.matbooth.co.uk/tag/fedora.html">fedora</a> <a href="//blog.matbooth.co.uk/tag/eclipse.html">eclipse</a> </p>
</footer><!-- /.post-info -->                <p>Discussing the benefits of packaging your software for Linux distributions.</p>
                <a class="readmore" href="//blog.matbooth.co.uk/06-benefits-of-distro-packaging.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="//blog.matbooth.co.uk/05-status-of-eclipse-in-fedora.html" rel="bookmark"
                           title="Permalink to Status of Eclipse in Fedora">Status of Eclipse in Fedora</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-08-14T16:00:00+01:00">
                Published: Fri 14 August 2015
        </abbr>
		<br />
        <abbr class="modified" title="2015-08-14T16:00:00+01:00">
                Updated: Fri 14 August 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="//blog.matbooth.co.uk/author/mat-booth.html">Mat Booth</a>
        </address>
<p>In <a href="//blog.matbooth.co.uk/category/misc.html">Misc</a>.</p>
<p>tags: <a href="//blog.matbooth.co.uk/tag/fedora.html">fedora</a> <a href="//blog.matbooth.co.uk/tag/eclipse.html">eclipse</a> </p>
</footer><!-- /.post-info -->                <p>Current status of Eclipse in Fedora.</p>
                <a class="readmore" href="//blog.matbooth.co.uk/05-status-of-eclipse-in-fedora.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="//blog.matbooth.co.uk/eclipse-luna-for-fedora-20.html" rel="bookmark"
                           title="Permalink to Eclipse Luna for Fedora 20">Eclipse Luna for Fedora 20</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-08-22T13:00:00+01:00">
                Published: Fri 22 August 2014
        </abbr>
		<br />
        <abbr class="modified" title="2014-08-22T15:00:00+01:00">
                Updated: Fri 22 August 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="//blog.matbooth.co.uk/author/mat-booth.html">Mat Booth</a>
        </address>
<p>In <a href="//blog.matbooth.co.uk/category/misc.html">Misc</a>.</p>
<p>tags: <a href="//blog.matbooth.co.uk/tag/fedora.html">fedora</a> <a href="//blog.matbooth.co.uk/tag/eclipse.html">eclipse</a> </p>
</footer><!-- /.post-info -->                <p>Eclipse Luna is now available for Fedora 20 as a software collection.</p>
                <a class="readmore" href="//blog.matbooth.co.uk/eclipse-luna-for-fedora-20.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="//blog.matbooth.co.uk/exciting-new-eclipse-plugins.html" rel="bookmark"
                           title="Permalink to Exciting New Eclipse Plug-ins in Fedora">Exciting New Eclipse Plug-ins in Fedora</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-08-21T14:00:00+01:00">
                Published: Thu 21 August 2014
        </abbr>
		<br />
        <abbr class="modified" title="2014-08-21T14:00:00+01:00">
                Updated: Thu 21 August 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="//blog.matbooth.co.uk/author/mat-booth.html">Mat Booth</a>
        </address>
<p>In <a href="//blog.matbooth.co.uk/category/misc.html">Misc</a>.</p>
<p>tags: <a href="//blog.matbooth.co.uk/tag/fedora.html">fedora</a> <a href="//blog.matbooth.co.uk/tag/eclipse.html">eclipse</a> </p>
</footer><!-- /.post-info -->                <p>TestNG and PHP Development Tools (PDT) plug-ins are now available in Fedora.</p>
                <a class="readmore" href="//blog.matbooth.co.uk/exciting-new-eclipse-plugins.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="//blog.matbooth.co.uk/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://github.com/mbooth101">github</a></li>
                            <li><a href="https://twitter.com/FOSS_mbooth">twitter</a></li>
                            <li><a href="mailto:mbooth@fedoraproject.org">email</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>